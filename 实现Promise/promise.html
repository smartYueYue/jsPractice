<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title></title>
</head>
<body>
  
</body>
<script>
  // 链式调用
  // function start() {  
  //   return new Promise((resolve, reject) => {  
  //     resolve('start');  
  //   });  
  // }  
    
  // let aaa = start()  
  //   .then(data => {  
  //     // promise start  
  //     console.log('result of start: ', data);  
  //     return Promise.resolve(1); // p1  
  //   })  
  //   .then(data => {  
  //     // promise p1  
  //     console.log('result of p1: ', data);  
  //     return Promise.reject(2); // p2  
  //   })  
  //   .then(data => {  
  //     // promise p2  
  //     console.log('result of p2: ', data);  
  //     return Promise.resolve(3); // p3  
  //   })  
  //   .catch(ex => {  
  //     // promise p3  
  //     console.log('ex: ', ex);  
  //     // return Promise.resolve(4); // p4  
  //     return false
  //   })  
  //   .then(data => {  
  //     // promise p4  
  //     console.log('result of p4: ', data);  
  //   }); 


  //   let p1 = new Promise(function(resolve, reject) {
  //     resolve(42)
  //   })
  //   let p2 = new Promise(function(resolve, reject) {
  //     reject(43)
  //   })
  //   p1.then(function(value) {
  //     console.log(value, 111)
  //     return p2
  //   }).then(function(value) {
  //     console.log(value, 222)
  //     return false
  //   }).catch((value) => {
  //     console.log(value, 333)
  //   }).then(value => {
  //     console.log(value, 444)
  //   })
  // ----------
//  const p1 = new Promise((resolve, reject) => {
//    console.log(1)
//    resolve('success')
//    setTimeout(() => {
//      reject('fail')
//    })
//  })
//  console.log(2)
//  setTimeout(() => {
//    console.log(3)
//  }, 0)
//  console.log(4)
//  const p2 = p1.then(res => {
//    console.log(res)
//    return res
//  }, error => {
//    console.log(error)
//    return error
//  })
//  console.log(p2 === p1)
// ------

const promise = new Promise((resolve, reject) => {
  setTimeout(() => {
    console.log('once')
    resolve('success')
  }, 1000)
})
 
const start = Date.now()
promise.then((res) => {
  console.log(res, Date.now() - start)
})
promise.then((res) => {
  console.log(res, Date.now() - start)
})
</script>
</html>